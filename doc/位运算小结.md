# 位运算小结

标签：算法

---

## 实用技巧

- xor(异或) a^b
	- a和b不同为1，相同为0
- 判断奇数还是偶数
	- if(i&1){
	...//为奇数的情况..
	}else{
	...//为偶数的情况...
	}
	- 自己学习：理解为((2^1+1)*2^2+1) 计算有几个1，两个
- 乘2，向左移动；除2，向右移动
	- n乘2的m次方：
	int mul(int n,int m){
		return n<<m; }
	- 自己学习：如果要实现用位运算计算n的m次方，代码如下
	```
	    public double power(int a,int k){
        if(k==0)return 1;
        if(a==0)return 0;
        boolean aisLeft=false;
        boolean kisLeft=false;
        if(k<0){
            k=-k;
            kisLeft=true;
        };
        if(a<0){
            a=-a;
            aisLeft=true;
        };
            double res=1;
            while(k!=0){
                if((k&1)==1)//检查末尾是否为1，如果是1则表示存在一个a,就是类似二进制，该为以a的x次方为底的1次方
                {
                    res=res*a;
                    System.out.println("res:"+res);
                }
                k=k>>1;
                a=a*a;//这里就是5（101）则（101）中间0位置是由a^a为底
            }

            if(kisLeft==true){
                res=1.00/res;

            }
            if(aisLeft==true){
            res=-res;
            }
            return res;
    }
	```
- 对于<<和>>的使用说明
	- <<乘2，如果位数是8位的时候，则向左移左边超出的位数会被抛弃
	- >>除2，如果是正数，则在左侧补0，如果是负数，则在左侧补1
- 负数的加减法，负数是由原码（正数即等于原码值）取反加1得到，正负数都是用该补码形式进行计算。若要求出原值，是将补码进行减1取反可得到对应的正数，加上负号则为负数。

---

- 面试题15：二进制中1的个数
	- 实现一个函数，要求输入一个整数，输出该数对应的二进制数中1的个数。比如9表示成二进制是1001，那么输入9的话，屏幕上打印2

```
    // 1. 不推荐的做法，无法处理当n为负数时无限向右移会引起死循环，因为左边置为1
    public int counOne(int n){
        int count=0;
        while(n!=0){
            if((n&1)==1){ //仅仅是判断其中有几个1存在，用1做与操作
                count++;
            }
            n=n>>1;
        }
        return count;
    }

    // 2. 常规解法,需要循环32次
    public int counOne2(int n){
        int count=0;
        int flag=1;
        while(flag!=0){
            if((n&flag)!=0){ //仅仅是判断其中有几个1存在，用1做与操作
                count++;
            }
            flag=flag<<1;
        }
        return count;
    }

	//3.  另一种二进制的运用，对该值减1与原值进行与操作，可逐次将原值右边单个1置为0
    //用该性质进行迭代操作
    public int countOne3(int n){
        if(n==0)return 0;
        int count=0;
        while(n!=0){
            n=n&(n-1);//经过思考，负数也是
            count++;
        }
        return count;
    }
```

- 题目分析
	- 题目类型：关于（三）数学基础二进制，位运算
- 技巧
	- 位运算需要掌握与、或、异或（不同时为1相同为0）、左移、右移的运算方法
	- 可能还会与二叉树结合使用或其他数据结构
	- 除了位运算的基本运算方法实现，还可能是通过迭代寻找规律解决位运算问题，其中包括一些较为常用的方法，比如n&(n-1)可以依次将n右边的1置为0从而通过轮次计算出1的个数等，或者是上面提到关于简化判断奇数或者是偶数的操作...
	- 还要注意对传入数值是否为正数/负数的判断，防止负数陷入死循环的问题